%!PS-Adobe-2.0 
%%BoundingBox: 0 20 700 450

/pbox {
  /h exch def /w exch def /b exch def /a exch def
  newpath a b moveto w 0 rlineto 0 h rlineto w neg 0 rlineto 
  0 h neg rlineto stroke
} def

/component {/y exch def /x exch def 
  newpath x y moveto 
  10 0 rmoveto 0 5 rlineto 0 10 rmoveto 0 5 rlineto 0 10 rmoveto  
  0 5 rlineto 25 0 rlineto 0 -35 rlineto -25 0 rlineto 
  -10 5 rmoveto  
  0 10 rlineto 20 0 rlineto 0 -10 rlineto -20 0 rlineto     
  0 15 rmoveto  
  0 10 rlineto 20 0 rlineto 0 -10 rlineto -20 0 rlineto stroke
} def    
/arrow {
  /y1 exch def /x1 exch def /y0 exch def /x0 exch def
  x0 y0 moveto x1 y1 lineto stroke
} def

/label {/y exch def /x exch def /fs exch def /str exch def
  /Helvetica findfont fs scalefont setfont
  newpath x y moveto
  str stringwidth /sy exch def /sx exch def
  sx 2 div neg 12 neg rmoveto str show
} def

/arrowhead {% stack: s x1 y1, current point: x0 y0
  gsave
  currentpoint % s x1 y1 x0 y0
  4 2 roll exch % s x0 y0 y1 x1
  4 -1 roll exch % s y0 y1 x0 x1
  sub 3 1 roll % s x1-x2 y0 y1
  sub exch % s y0-y1 x1-x2
  atan rotate % rotate over arctan((y0-y1)/(x1-x2))
  dup scale % scale by factor s
  -7 2 rlineto 0 -2 rlineto 0 -2 rlineto
  closepath fill % fill arrowhead
  grestore
  newpath
} def

/supply1 {/y0 exch def /x0 exch def /lab exch def
newpath x0 y0 moveto 
x0 y0 25 add lineto
x0 y0 37.5 add 12.5 -90 270 arc 
stroke
x0 25 add y0 25 add moveto lab show
}def

/require1 {/y0 exch def /x0 exch def /lab exch def
newpath x0 y0 moveto 
x0 y0 25 add lineto
-12.5 12.5 rmoveto
x0 y0 37.5 add 12.5 -180 0 arc 
stroke
x0 37.5 add y0 37.5 add moveto lab show
}def

/require2 {/y0 exch def /x0 exch def /lab exch def
newpath x0 y0 moveto 
x0 25 add y0 lineto
12.5 12.5 rmoveto
x0 37.5 add y0 12.5 90 270 arc 
stroke
x0 25 add y0 -50 add moveto lab show
}def

/require4 {/y0 exch def /x0 exch def /lab exch def
newpath x0 y0 moveto 
x0 -25 add y0 lineto
-12.5 -12.5 rmoveto
x0 -37.5 add y0 12.5 -90 +90 arc 
stroke
x0 -37.5 add y0 -50 add moveto lab show
}def


% 0 0 700 550 pbox % bounding box

50 0 550 450 pbox
(P) 32 75 400 label
100 50 150 200 pbox
(B) 32 175 150 label
400 150 150 200 pbox
(A) 32 475 250 label
(IB) 175 250 supply1 
(IA) 475 350 supply1 
(IA) 500 450 supply1
(IC) 250 100 require2 
(IC) 600 100 require2 
(IB) 400 300 require4 

200 200 component 
500 300 component
550 400 component